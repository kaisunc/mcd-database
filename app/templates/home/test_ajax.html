<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" type="text/css" href="static/lib/DataTables/datatables.min.css"/>
  <script src="https://code.jquery.com/jquery-1.12.4.js" type="text/javascript"></script>    
  <script type="text/javascript" src="static/lib/DataTables/datatables.min.js"></script>
</head>


<body>

<table id="media" class="compact table-striped table-bordered table-hover" cellspacing="0" width="100%">
</table>

<script>
  $(document).ready(function() {
    render =  function ( data, meta, row ) {return data.label;};
    thumb_render = function ( data, meta, row ) {return '<img class="thumbs" src="'+data+'"/>';};

    //data = JSON.parse("{{data}}");
    console.log('here');
    columns = JSON.parse("{{columns}}");    
    columnDefs = JSON.parse("{{columnDefs}}");
    for(i=0;i<columns.length;i++){
      if(columns[i]['render'] == 'render'){
        columns[i]['render'] = render;
      };
      if(columns[i]['render'] == 'thumb_render'){
        columns[i]['render'] = thumb_render;
      };
    };    
    table = $('#media').DataTable( {
        "dom": 't<"bottom"irp><"clear">',
        "pageLength": 100,
        "processing": true,
        "serverSide": true,
        "ajax": "ajax",
        "rowId": 'id',
        "columns": columns,        
        "columnDefs": columnDefs,      
        "order": [[ 1, "desc" ]],        
        "select": {
            "style": 'os',
            "selector": 'td:first-child'
        }
    });      
/*        $('#test').DataTable( {
          "processing": true,
          "serverSide": true,
          "ajax": "ajax"
      } );*/
  });

</script>

</body>
</html>